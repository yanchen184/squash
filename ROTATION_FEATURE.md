# 新功能說明：第二輪開始的位置輪動系統

## 🔄 位置輪動規則

從第二輪開始，參賽者的位置會按照以下規則輪動：
- A → B
- B → C  
- C → D
- D → A

## 📝 實施細節

### 輪動時機
- **第一輪**：保持原始位置 (A, B, C, D)
- **第二輪**：位置輪動一次 (D, A, B, C)
- **第三輪**：位置輪動兩次 (C, D, A, B)
- **第四輪**：位置輪動三次 (B, C, D, A)
- **第五輪**：回到原始位置 (A, B, C, D)

### 對戰順序邏輯
每輪的 6 場比賽順序：
1. **第1場**：位置A vs 位置B（固定）
2. **第2場**：位置C vs 位置D（固定）
3. **第3場**：第1場贏家 vs 第2場贏家（贏家組）
4. **第4場**：第1場輸家 vs 第2場輸家（輸家組）
5. **第5場**：剩餘組合1
6. **第6場**：剩餘組合2

## 🎯 TBC 顯示邏輯

### 何時顯示 TBC
- **第3-6場比賽**：在前兩場比賽完成之前顯示 "TBC"
- **第1-2場比賽**：始終顯示確定的對戰者

### 視覺提示
- **TBC 狀態**：灰色斜體文字，降低透明度
- **確認狀態**：正常顏色和字體
- **狀態指示**：
  - ✓ 已完成
  - 進行中
  - 待確認

## 💡 用戶界面改進

### 信息顯示
1. **輪動提示**：顯示當前輪次的位置對應關係
2. **規則說明**：解釋動態對戰順序的生成邏輯
3. **進度指示**：每輪固定 6 場比賽

### 樣式優化
- 輪動信息：藍色邊框背景
- 規則說明：藍色信息框
- TBC 狀態：灰色虛化效果

## 🔧 技術實現

### 核心函數
```javascript
// 計算位置輪動
rotatePlayersForRound(roundNumber)

// 獲取位置映射
getPositionMappingForRound(roundNumber) 

// 生成動態對戰順序
generateDynamicMatchOrder(matchResults, currentMatchIndex)

// 獲取輪動信息（用於顯示）
getPlayerRotationInfo(roundNumber)
```

### 修改的組件
- `gameLogic.js`：核心輪動邏輯
- `MatchSchedule.js`：TBC 顯示和輪動信息
- `GameRoom.js`：適配新的輪數計算
- `App.css`：新增樣式支持

## 🎮 使用體驗

### 對用戶的影響
1. **增加變化性**：避免每輪完全相同的對戰順序
2. **保持公平性**：所有人都會輪流坐在不同位置
3. **視覺清晰**：TBC 標記讓用戶知道哪些對戰還未確定

### 向後兼容
- 現有房間和數據結構不受影響
- 第一輪的行為完全保持不變
- 只是從第二輪開始增加輪動效果

## 📊 測試場景

建議測試以下場景：
1. 新房間從第一輪開始
2. 完成第一輪後進入第二輪的輪動
3. 多輪比賽的位置變化
4. TBC 狀態的正確顯示和更新

## 🚀 版本更新

- **版本號**：從 v1.1.1 升級到 v1.2.0
- **新功能**：位置輪動系統
- **界面改進**：TBC 狀態顯示
- **用戶體驗**：更豐富的信息提示